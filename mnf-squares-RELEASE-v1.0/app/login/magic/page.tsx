'use client'; import { useState } from 'react'; export default function MagicLogin(){ const [email,setEmail]=useState(''); const [sent,setSent]=useState(false); const [err,setErr]=useState<string|null>(null); async function requestLink(e:any){ e.preventDefault(); setErr(null); const r=await fetch('/api/auth/magic/request',{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email, redirect:'/dashboard' }) }); if(!r.ok){ const j=await r.json(); setErr(j?.error||'Failed'); return;} setSent(true);} return (<div className='max-w-sm mx-auto mt-16 p-6 border rounded bg-white space-y-4'><h1 className='text-xl font-bold'>Sign in with Email</h1>{sent?<div>Check your inbox for a link to sign in.</div>:(<form onSubmit={requestLink} className='space-y-3'><input className='border p-2 rounded w-full' placeholder='email@domain.com' type='email' value={email} onChange={e=>setEmail(e.target.value)} /><button className='px-4 py-2 bg-black text-white rounded w-full'>Send magic link</button></form>)}{err && <div className='text-red-600 text-sm'>{err}</div>}</div>); }