import { NextResponse } from 'next/server'; import { PrismaClient } from '@prisma/client'; import { requireRole } from '@/app/lib/requireRole'; const prisma=new PrismaClient(); export async function PUT(req:Request,{params}:{params:{id:string}}){ const f=await requireRole('ADMIN',req); if(f) return f; const b=await req.json(); const u=await prisma.user.update({ where:{ id: params.id }, data:{ email:b.email, name:b.name, role:b.role } }); return NextResponse.json(u);} export async function DELETE(req:Request,{params}:{params:{id:string}}){ const f=await requireRole('ADMIN',req); if(f) return f; await prisma.user.delete({ where:{ id: params.id } }); return NextResponse.json({ ok:true }); }