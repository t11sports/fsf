import { NextResponse } from 'next/server'; import { PrismaClient } from '@prisma/client'; const prisma = new PrismaClient(); async function getHandler(){ const rows = await prisma.sale.findMany(); return NextResponse.json(rows); } async function postHandler(req: Request){ const body = await req.json(); const row = await prisma.sale.create({ data: { buyerId: body.buyerId, playerId: body.playerId ?? null, qty: Number(body.qty||0), due: Number(body.due||0), received: Number(body.received||0), balance: Number(body.due||0)-Number(body.received||0), note: body.note ?? null } }); return NextResponse.json(row); } export const GET = getHandler; export const POST = postHandler;